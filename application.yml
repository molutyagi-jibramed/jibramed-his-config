# -----------------------------------------------------------------------------
# SHARED CONFIGURATION (for all microservices)
# -----------------------------------------------------------------------------
# Properties in this file are inherited by all services connecting to the
# Config Server.
# -----------------------------------------------------------------------------

eureka:
  client:
    # This tells every microservice where to find the discovery server.
    service-url:
      defaultZone: http://localhost:8761/eureka/
  instance:
    # Use the service's IP address when registering with Eureka.
    # This is more reliable in containerized environments like Docker.
    prefer-ip-address: true

spring:
  datasource:
    master:
      url: jdbc:postgresql://localhost:5432/jibramed-his-platform-db
      username: postgres
      password: root
      driver-class-name: org.postgresql.Driver

# This ensures that Flyway (if you use it) only runs on the master DB
# and doesn't try to use the multi-tenant routing datasource.
flyway:
  url: ${spring.datasource.master.url}
  user: ${spring.datasource.master.username}
  password: ${spring.datasource.master.password}

# Disable JPA DDL auto for the routing datasource
jpa:
  hibernate:
    ddl-auto: none

app:
  base-domain: "jibramed.com"
  tenant-jwt-secret: c42ae66c79c7aaf836e334617915f682ed539c7d8549f27778963cf191db9a8d18962260c971b58071048a0b2350e959791a63ec44846f45a501b02dd7095ca3
  tenant-jwt-expiry-minutes: 5
  realm-header-name: X-realm
  tenant-header-name: X-Tenant-TOKEN

# Multitenancy Library Configuration
# We tell our common library which header to read.
com:
  his:
    jibramed:
      multitenancy:
        header-name: X-Tenant-TOKEN
